<!--pages/plan-edit/plan-edit.wxml-->
<wxs src="./tools.wxs" module="tools" />
<view class="plan-edit {{isIphoneX ? 'iphone-x' : 'no-iphone-x'}}">
  <title />
  <plan-list stepList="{{stepList}}" 
    mainTitle="{{plan.title}}"
    stepList="{{plan.stepList}}"
    addTxt="{{stepList.length == 0 ? '添加步骤' : '下一步'}}" 
    bind:delStep="handleToDelStep" 
    bind:addStep="handleToAddStep"
    bind:edited="handleToEdited" />
  <!-- 添加到我的一天 -->
  <funt-button data-type="today" 
    isFuntLive="{{plan.organize === 'today'}}" isDivisionLine="{{true}}" iconUrl="{{todayFuntIcon}}" 
    iconLiveUrl="{{todayFuntLiveIcon}}" txt="添加到“我的一天”" liveTxt="已添加到“我的一天”"
    bind:changeState="handleToChangeState" bind:del="handleToDelFunt" />
  <!-- 添加截止日期 -->
  <funt-button data-type="date" isFuntLive="{{plan.closing_date > 0}}" iconUrl="{{dateFuntIcon}}" iconLiveUrl="{{dateFuntLiveIcon}}" txt="添加截止日期" bind:changeState="handleToChangeState" bind:del="handleToDelFunt" />
  <!-- 重复 -->
  <funt-button data-type="repeat" isFuntLive="{{isRepeatFutLive}}" iconUrl="{{repeatFuntIcon}}" iconLiveUrl="{{repeatFuntLiveIcon}}" txt="{{repeatFuntTxt}}" bind:changeState="handleToChangeState" bind:del="handleToDelFunt" />
  <edit-box value="{{plan.detail}}" bind:blur="handleEditDetailEnd" />
  <footer-column txt="{{tools.conversionDate(plan.create_time)}}" isIphoneX="{{isIphoneX}}" bind:del="handleToDelPlan" />
</view>
